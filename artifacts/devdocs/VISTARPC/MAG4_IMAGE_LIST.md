---
layout: default
title: VISTA RPC Documentation
---

#### [Developer Documentation](../index) &#187; [Native RPCs](TableOfContents) &#187; MAG4 IMAGE LIST<br/>
# MAG4 IMAGE LIST

This remote procedure returns information about images that conform to the provided criteria.

## Properties

Property | Value
--- | ---
Label | GETIMGS
MUMPS Implementation | [MAGSIXG1](http://code.osehra.org/dox/Routine_MAGSIXG1_source.html)
Return Type | ARRAY


## Input Parameters

Name | Type | Maximum Data Length | Required | Description
--- | --- | --- | --- | ---
FLAGS | LITERAL |  | true | Flags that control the execution (can be combined):   C  Capture date range. If this flag is provided, then the     remote procedure uses values of the FROMDATE and TODATE     parameters to select images that were captured in this     date range (see the DATE/TIME IMAGE SAVED field (7) and     the &quot;AD&quot; cross-reference).      Otherwise, values of those parameters are treated as      the date range when procedures were performed (see the     PROCEDURE/EXAM DATE/TIME field (15) and cross-references      &quot;APDTPX&quot; and &quot;APDT&quot;).   D  Include only deleted images (file #2005.1)  E  Include only existing images (file #2005)   S  Return the sparse subset of images captured by the user     defined by the miscellaneous &quot;SAVEDBY&quot; filter parameter     (see the MISCPRMS parameter). The &quot;SAVEDBY&quot; becomes a     required parameter in this case.      Firstly, images are preselected according to the date      range and other criteria. Those of them that were captured     immediately before and after patient changes are stored to     the &quot;priority&quot; temporary buffer. The others are stored to     the regular temporary buffer.      Then, the requested maximum number of images is calculated     according to the total number of preselected entries and     the percentage value defined by the MAXNUM parameter.          If the number of entries in the &quot;priority&quot; buffer less     than the maximum number of images and the regular buffer     is not empty, then missing quantity of preselected images     is merged to the &quot;priority&quot; buffer from the regular one.      Finally, no more than maximum number of entries is copied     from the &quot;priority&quot; buffer to the remote procedure&#x27;s     result array.       G  Include Group Images in the list of images returned.      If any image in a group has an image that matches the      status provided in the search criteria then      the group will be returned.                       If the G flag is not set then only the status of the      Group entry will be checked and the group will be      returned if it passes. If neither &#x27;E&#x27; nor &#x27;D&#x27; flag is provided, then an error code (-6) isreturned.
FROMDATE | LITERAL |  |  | Beginning of the date range for image selection. Date can be in internalor external FileMan format. If the parameter is not defined or empty, thenthe date range remains open on this side. Depending on the value of the FLAGS parameter, the date range filter isapplied either to the exam/procedure dates (PROCEDURE/EXAM DATE/TIME field(15)) or image capture dates (DATE/TIME IMAGE SAVED field (7)). Time parts of date range parameters are ignored and both ends of the daterange are included in the search. For example, in order to search imagesfor May 21, 2008, the internal value of both parameters should be 3080521.
TODATE | LITERAL |  |  | End of the date range for image selection. Dates can be in internal orexternal FileMan format. If the parameter is not defined or empty, thenthe date range remains open on this side. Depending on the value of the FLAGS parameter, the date range filter isapplied either to the exam/procedure dates (PROCEDURE/EXAM DATE/TIME field(15)) or image capture dates (DATE/TIME IMAGE SAVED field (7)). Time parts of date range parameters are ignored and both ends of the daterange are included in the search. For example, in order to search imagesfor May 21, 2008, the internal value of both parameters should be 3080521.
MISCPRMS | LIST |  |  | Items of this list define various filter parameters. Each item has 3 ormore pieces separated by &#x27;^&#x27;:   ^01: Parameter name  ^02: Index (for multiples and word-processing values)  ^03: Value1  ^04: Value2  ... The following filter parameters are supported by this remote procedure:   CAPTAPP^^{Name or Code}^{Name or Code}^...    Internal or external values of the CAPTURE APPLICATION    field (8.1) of the file #2005.   GDESC^^{Text}    Text that should be present in the SHORT DESCRIPTION    field (10) of the IMAGE file (#2005). The comparison    is case-insensitive.   IDFN^^{DFN}    Patient IEN (DFN). If this parameter is not defined, all    patients&#x27; images are considered.   ISTAT^^{Name or Code}^{Name or Code}^...    Internal or external values of the STATUS field (113)    of the file #2005. 0 (zero) code selects image records    with empty STATUS field.   IXCLASS^^{Name or IEN}^{Name or IEN}^...    Image class names or IENs (see the CLASS INDEX field (41)    of the file #2005 for details).   IXORIGIN^^{Name or Code}^{Name or Code}^...    Internal or external values of the ORIGIN INDEX field (45)    of the file #2005.   IXPKG^^{Name or Code}^{Name or Code}^...    Internal or external values of the PACKAGE INDEX field (40)    of the file #2005.   IXPROC^^{Name or IEN}^{Name or IEN}^...    Procedure/Event names or IENs (see the PROC/EVENT INDEX    field (43) of the file #2005 for details).   IXSPEC^^{Name or IEN}^{Name or IEN}^...    Specialty/SubSpecialty names or IENs (see the SPEC/SUBSPEC    INDEX field (44) of the file #2005 for details).   IXTYPE^^{Name or IEN}^{Name or IEN}^...    Image type names or IENs (see the TYPE INDEX field (42) of    the file #2005 for details).   SAVEDBY^^{DUZ}    If this parameter is defined, then only those images that were    captured by this user (see the IMAGE SAVE BY field (8) of the    file #2005 for details) are considered.   SENSIMG^^{Name or Code}^{Name or Code}^...    Internal or external values of the CONTROLLED IMAGE field (112)    of the file #2005. For pointer type parameters, pure numeric values are always treated asinternal entry numbers (IEN). Parameters can be added to the list in any order. See comments precedingthe GETIMGS^MAGSIXG1 for more details. Example:   with RPCBroker.Param[4] do    begin      PType :&#x3D; list;      Mult[1] :&#x3D; &#x27;IXPKG^^RAD^LAB&#x27;;      Mult[2] :&#x3D; &#x27;IXCLASS^^1^ADMIN&#x27;;      Mult[3] :&#x3D; &#x27;IXORIGIN^^NON-VA^F&#x27;;      Mult[4] :&#x3D; &#x27;IDFN^^2341&#x27;;     end;
MAXNUM | LITERAL |  |  | If this parameter is defined and greater than 0, then it determines themaximum number of images returned by the call. If the S flag is included in the value of the FLAGS parameter, then the MAXNUM parameter must be defined and greater than 0. Its value determinesthe percentage of preselected images to be returned in the result array.For example, if the value of this parameter is 35 and 230 images arepreselected (according to the user, date range, and other selectioncriteria), then 81 images will be returned.



{::nomarkdown} <br/><p style="font-size: 11px">Document generated on August 24th 2017, 2:57:41 pm</p>{:/}